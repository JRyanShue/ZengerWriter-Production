(this.webpackJsonpzengerwriter=this.webpackJsonpzengerwriter||[]).push([[0],{16:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var r=n(2),s=n.n(r),a=n(11),i=n.n(a),o=(n(16),n(3)),u=n(4),c=n(6),l=n(5),d=(n(9),n(1)),m=n.n(d),h=n(7),p=n(8);function f(){return(f=Object(h.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=new FormData).append("data",JSON.stringify(t)),fetch("http://"+n+":8080/splice_queue",{method:"POST",body:r}).then((function(){fetch("http://"+n+":8080/get_gcode").then((function(e){return e.text()})).then((function(e){v(e)}))}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){var t,n=document.createElement("a");console.log(e),t="queue.gcode",function(e,t){n.href&&URL.revokeObjectURL(n.href),n.href=URL.createObjectURL(e),n.download=t||"data.json",n.dispatchEvent(new MouseEvent("click"))}(new Blob([e],{type:"text/plain"}),t)}function b(){return(b=Object(h.a)(m.a.mark((function e(t,n,r,s){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new Headers).append("path","Users/"+n+"/queues/"+r+"/info.json"),a.append("Content-Type","application/json"),e.next=5,fetch("http://"+s+":8080/put_json",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:a,redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 5:e.sent;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){return O.apply(this,arguments)}function O(){return(O=Object(h.a)(m.a.mark((function e(t,n){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Getting queue list from username:",n),(r=new Headers).append("Content-Type","application/json"),r.append("username",n),console.log("headers:",r),s=[],e.next=8,fetch("http://"+t+":8080/get_queues",{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:r,redirect:"follow",referrerPolicy:"no-referrer"}).then((function(e){return e.json()})).then((function(e){var t=e.queue_numbers;console.log("queue numbers:",t);for(var n=0;n<t.length;n++)console.log("at i:",t[n]),s.push(t[n])})).catch((function(){console.log("error")}));case 8:return e.sent,console.log("values:",s),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t,n,r){return y.apply(this,arguments)}function y(){return(y=Object(h.a)(m.a.mark((function e(t,n,r,s){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new Headers).append("path","Users/"+n+"/queues/"+r+"/info.json"),a.append("Content-Type","application/json"),e.next=5,fetch("http://"+t+":8080/pull_object",{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:a,redirect:"follow",referrerPolicy:"no-referrer"}).then((function(e){return e.json()})).then((function(e){console.log("data from API:",e);var t=e.body;return console.log("INFO::",t),s.setQueue(r,t,s),"OK"}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return x.apply(this,arguments)}function x(){return(x=Object(h.a)(m.a.mark((function e(t,n){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Getting project list from username:",n),(r=new Headers).append("Content-Type","application/json"),r.append("username",n),console.log("headers:",r),s=[],console.log("http://"+t+":8080/get_projects"),e.next=9,fetch("http://"+t+":8080/get_projects",{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:r,redirect:"follow",referrerPolicy:"no-referrer"}).then((function(e){return e.json()})).then((function(e){var t=e.project_numbers;console.log("keys:",t);for(var n=0;n<t.length;n++)console.log("at i:",t[n]),s.push(t[n])})).catch((function(){console.log("error")}));case 9:return e.sent,console.log("values:",s),e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t,n,r){return D.apply(this,arguments)}function D(){return(D=Object(h.a)(m.a.mark((function e(t,n,r,s){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new Headers).append("path","Users/"+n+"/projects/"+r),a.append("Content-Type","application/json"),e.next=5,fetch("http://"+t+":8080/get_object",{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:a,redirect:"follow",referrerPolicy:"no-referrer"}).then((function(e){return e.json()})).then((function(e){console.log("data from API:",e);var t=e.url,n=e.name;return s.setPreview(r,n,t,s),"OK"}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(h.a)(m.a.mark((function e(t,n,r){var s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=new Headers).append("path","Users/"+t.username+"/projects/"+n),s.append("Content-Type","application/json"),e.next=5,fetch("http://"+t.IP+":8080/pull_object_url",{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:s,redirect:"follow",referrerPolicy:"no-referrer"}).then((function(e){return e.json()})).then((function(e){var s=e.url;return console.log("editor url:",s),t.enterEditor(s,t.username,n,r),"OK"}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(h.a)(m.a.mark((function e(t,n,r,s){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("SetEditorURL"),(a=new Headers).append("path","Users/"+t+"/projects/"+r),a.append("Content-Type","application/json"),e.next=6,fetch("http://"+n+":8080/pull_object_url",{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:a,redirect:"follow",referrerPolicy:"no-referrer"}).then((function(e){return e.json()})).then((function(e){var t=e.url;return console.log("GOT URL::",t),s(t),"OK"}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=n(0),P=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).key=e.key,r.backgroundImage=e.backgroundImage,console.log(r.backgroundImage),r.id=e.id,r.name=e.name,r.className="preview-img",r.gcodelist=e.gcodelist,r.handleClick=function(){!function(e,t,n){k.apply(this,arguments)}(this.gcodelist,this.id,this.name)},r.startDrag=function(e){var t={name:r.name,id:r.id};e.dataTransfer.setData("application/json",JSON.stringify(t))},r}return Object(u.a)(n,[{key:"render",value:function(){return Object(N.jsx)("div",{draggable:!0,onDragStart:this.startDrag,className:"preview-img-box",children:Object(N.jsx)("div",{className:this.className,style:{background:this.backgroundImage,backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",backgroundSize:"500px"},onClick:this.handleClick.bind(this),children:this.name},this.key)})}}]),n}(s.a.Component),L=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).IP=e.IP,r.username=e.username,r.editorNumbers=[],r.previews={},r.listItems=Object(N.jsx)("div",{children:"Loading..."}),r.state={numbersList:Object(N.jsx)("div",{}),mounted:!1},r.setPreview=function(e,t,n,r){r.previews[e]={name:t,url:n},console.log("URL set:",r.previews[e])},r.enterEditor=function(e,t,n,r){window.location="/editor/editor?editorURL="+e+"&username="+t+"&editorID="+n+"&editorName="+r},r.getEditorNumbers().then((function(e){console.log("Editor numbers pulled:",r.editorNumbers),r.editorNumbers.sort(),r.editorNumbers.reverse();for(var t=r.editorNumbers,n=0;n<t.length;n++)r.previews[t[n]]=S(r.IP,r.username,t[n],Object(p.a)(r));console.log("All promises:",Object.values(r.previews)),Promise.all(Object.values(r.previews)).then((function(e){r.listItems=t.map((function(e){var t="url("+r.previews[e].url+")",n=r.previews[e].name;return Object(N.jsx)(P,{gcodelist:Object(p.a)(r),backgroundImage:t,id:e,name:n,onClick:function(){console.log("click")}},e.toString())})),console.log("items:",r.listItems),r.state={numbersList:r.listItems,mounted:r.state.mounted},console.log("mounted?",r.state.mounted),r.state.mounted&&r.setState({numbersList:r.listItems,mounted:r.state.mounted})}))})),r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setState({numbersList:this.listItems,mounted:!0})}},{key:"update",value:function(){}},{key:"getEditorNumbers",value:function(){var e=Object(h.a)(m.a.mark((function e(){var t=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(this.IP,this.username).then((function(e){for(var n=0;n<e.length;n++)console.log(e[n]),t.editorNumbers.push(e[n])}));case 2:return e.abrupt("return",this.editorNumbers);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(N.jsxs)("div",{id:"EditorList",children:[Object(N.jsx)("p",{className:"noselect",children:"Ordered by last modified"}),this.state.numbersList]})}}]),n}(s.a.Component);function S(e,t,n,r){return C.apply(this,arguments)}function C(){return(C=Object(h.a)(m.a.mark((function e(t,n,r,s){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t,n,r,s).then((function(e){return"OK"}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return Date.now||(Date.now=function(){return(new Date).getTime()}),Math.floor(Date.now()/1e3)}var E=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).key=e.key,r.id=e.id,r.queueOrder=e.queueOrder,e.name&&(r.name=e.name),r.number=e.number,r.plateName=e.plateName,r.className="queue",r.queuelist=e.queuelist,r.setInfo=e.setInfo,console.log("SETINFO:",r.setInfo),r.handleClick=function(){},r.onChange=function(){r.setInfo(r.queueOrder,document.getElementById("queueText"+r.id).value)},r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=document.getElementById("queueText"+this.id);t.value=this.number,t.addEventListener("change",(function(){e.onChange()}))}},{key:"render",value:function(){return Object(N.jsxs)("div",{className:"queue-box",onClick:this.handleClick.bind(this),children:[Object(N.jsx)("input",{id:"queueText"+this.id,type:"text",defaultValue:!0}),Object(N.jsx)("div",{className:"queue-input",children:Object(N.jsx)("div",{className:"noselect",children:this.plateName})})]})}}]),n}(s.a.Component),U=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;Object(o.a)(this,n),(r=t.call(this,e)).key=e.key,r.id=e.id,r.name=e.name,r.className="queue",r.queuelist=e.queuelist,r.elements=e.elements,console.log("this.elements:",r.elements),r.elementsInfo={},r.setInfo=function(e,t){r.elements[e].number=t};var s=r.elementsArray();return r.elementsDiv=s.map((function(e){return Object(N.jsx)(E,{queueOrder:s.indexOf(e),gcodelist:Object(p.a)(r),id:e.ID,rootID:e.rootID,plateName:e.plateName,number:e.number,setInfo:r.setInfo},e.plateName)})),r.state={numbersList:Object(N.jsx)("div",{}),mounted:!1,display:"none"},r.handleClick=function(){for(var e in this.state.mounted&&(console.log(this.state.display),"none"==this.state.display?(console.log(this.state.display),this.setState({numbersList:this.elementsDiv,mounted:!0,display:"block"})):this.setState({numbersList:this.elementsDiv,mounted:!0,display:"none"})),console.log(this.elementsDiv),this.elementsDiv){var t;console.log("ID",this.elementsDiv[e].props.id),t=this.elementsInfo[this.elementsDiv[e].props.id]?this.elementsInfo[this.elementsDiv[e].props.id].number:this.elementsDiv[e].props.number,console.log("Number",t),console.log("plateName",this.elementsDiv[e].props.plateName),console.log("rootID",this.elementsDiv[e].props.rootID)}this.save()},r.dragOver=function(e){e.preventDefault()},r.drop=function(e){var t=e.dataTransfer.getData("application/json");if(t){var n=(Date.now||(Date.now=function(){return(new Date).getTime()}),Math.floor(Date.now())),s=JSON.parse(t).name,a=JSON.parse(t).id.toString();r.elements[Object.keys(r.elements).length]={ID:n,number:"1",plateName:s,rootID:a},r.elementsDiv.push(Object(N.jsx)(E,{queueOrder:Object.keys(r.elementsDiv).length,gcodelist:Object(p.a)(r),id:n,rootID:a,plateName:s,number:"1",setInfo:r.setInfo},s.toString())),r.setState({numbersList:r.elementsDiv})}},r.startDrag=function(e){var t={queueName:r.name,queueID:r.id,queueElements:r.elements};e.dataTransfer.setData("application/json",JSON.stringify(t))},r}return Object(u.a)(n,[{key:"elementsArray",value:function(){var e=[];for(var t in this.elements)e.push(this.elements[t]);return e}},{key:"componentDidMount",value:function(){this.setState({numbersList:this.elementsDiv,mounted:!0,display:"none"}),document.getElementById("titleField"+this.id).value=this.name}},{key:"save",value:function(){var e={};for(var t in this.elementsDiv){var n,r=t,s=this.elementsDiv[t].props.id;n=this.elementsInfo[this.elementsDiv[t].props.id]?this.elementsInfo[this.elementsDiv[t].props.id].number:this.elementsDiv[t].props.number;var a=this.elementsDiv[t].props.plateName,i=this.elementsDiv[t].props.rootID;e[r]={ID:s,number:n,plateName:a,rootID:i}}!function(e,t,n,r){b.apply(this,arguments)}({name:this.name,id:this.id,queues:e},this.queuelist.username,this.id,this.queuelist.IP)}},{key:"render",value:function(){return Object(N.jsxs)("div",{children:[Object(N.jsx)("div",{draggable:!0,onDragStart:this.startDrag,onDragOver:this.dragOver,onDrop:this.drop,className:"queue-box",onClick:this.handleClick.bind(this),children:Object(N.jsx)("div",{className:this.className,children:Object(N.jsx)("input",{id:"titleField"+this.id,type:"text",className:"",defaultValue:!0})},this.key)}),Object(N.jsx)("div",{style:{display:this.state.display},children:this.state.numbersList})]})}}]),n}(s.a.Component),Q=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).IP=e.IP,r.username=e.username,r.queueKeys=[],r.queuesData={},r.listItems=Object(N.jsx)("div",{children:"Loading..."}),r.state={queuesList:Object(N.jsx)("div",{}),mounted:!1},r.setQueueList=e.setQueueList,r.setQueue=function(e,t,n){n.queuesData[e]=t},r.addQueue=function(e){var t=T();r.queueKeys.push(t),r.setQueue(t,e,Object(p.a)(r)),r.listItems=r.queueKeys.map((function(e){r.queuesData[e].name;var t=r.queuesData[e];return r.createQueueElement(Object(p.a)(r),e,t)})),r.setState({queuesList:r.listItems})},r.getQueueKeys().then((function(e){r.queueKeys.sort(),r.queueKeys.reverse();for(var t=r.queueKeys,n=0;n<t.length;n++)r.queuesData[t[n]]=R(r.IP,r.username,t[n],Object(p.a)(r));Promise.all(Object.values(r.queuesData)).then((function(e){r.listItems=t.map((function(e){r.queuesData[e].name;var t=r.queuesData[e];return r.createQueueElement(Object(p.a)(r),e,t)})),console.log("LISTITEMS:",r.listItems),r.state={queuesList:r.listItems,mounted:r.state.mounted},r.state.mounted&&r.setState({queuesList:r.listItems,mounted:r.state.mounted})}))})),r.setQueueList(Object(p.a)(r)),r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setState({queuesList:this.listItems,mounted:!0})}},{key:"update",value:function(){}},{key:"getQueueKeys",value:function(){var e=Object(h.a)(m.a.mark((function e(){var t=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(this.IP,this.username).then((function(e){for(var n=0;n<e.length;n++)t.queueKeys.push(e[n])}));case 2:return e.abrupt("return",this.queueKeys);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createQueueElement",value:function(e,t,n){return Object(N.jsx)(U,{queuelist:e,id:t,name:n.name,elements:n.queues},t.toString())}},{key:"render",value:function(){return Object(N.jsxs)("div",{id:"QueueList",children:[Object(N.jsx)("p",{className:"noselect",children:"Ordered by last modified"}),this.state.queuesList]})}}]),n}(s.a.Component);function R(e,t,n,r){return K.apply(this,arguments)}function K(){return(K=Object(h.a)(m.a.mark((function e(t,n,r,s){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t,n,r,s).then((function(){return"OK"}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;Object(o.a)(this,n),(r=t.call(this,e)).IP=e.IP,r.username=e.username,r.editorName="Untitled Plate",r.setURL=function(e){this.editorURL=e};r.username,r.IP;return r.state={newQueue:function(){console.log("old")}},r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setState({numbersList:this.listItems,mounted:!0})}},{key:"setQueueList",value:function(e){var t=this;this.queueList=e,console.log("SETTTTttyt",this.queueList),this.setState({newQueue:function(){t.queueList.addQueue({name:"New Queue",id:1628362074,queues:{}})}}),console.log(this.state.newQueue)}},{key:"render",value:function(){return Object(N.jsxs)("div",{children:[Object(N.jsxs)("div",{id:"QueueHeader",children:[Object(N.jsx)("div",{className:"newqueuelabel",children:Object(N.jsx)("p",{className:"noselect",children:"Build Sequence"})}),Object(N.jsx)("div",{id:"newqueuebutton",className:"newqueuebutton",onClick:this.state.newQueue,children:Object(N.jsx)("p",{className:"noselect",children:"+"})})]}),Object(N.jsx)(Q,{IP:this.IP,username:this.username,setQueueList:this.setQueueList.bind(this)})]})}}]),n}(s.a.Component),M=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).IP=e.serverIP,r.username=e.username,r}return Object(u.a)(n,[{key:"render",value:function(){return Object(N.jsx)("div",{children:Object(N.jsx)(_,{IP:this.IP,username:this.username})})}}]),n}(s.a.Component),B=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;Object(o.a)(this,n),(r=t.call(this,e)).IP=e.IP,r.username=e.username,r.editorName="Untitled Plate",r.setURL=function(e){this.editorURL=e};var s=r.username,a=r.IP;return r.newEditor=function(){var e=this,t=T();(function(e,t,n,r){return q.apply(this,arguments)})(s,a,t,this.setURL.bind(this)).then((function(){console.log("URL::",e.editorURL),window.location="/editor/editor?editorURL="+e.editorURL+"&username="+e.username+"&editorID="+t+"&editorName="+e.editorName}))},r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setState({numbersList:this.listItems,mounted:!0})}},{key:"render",value:function(){return Object(N.jsxs)("div",{id:"EditorHeader",children:[Object(N.jsx)("div",{className:"neweditorlabel",children:Object(N.jsx)("p",{className:"noselect",children:"Prepare Models"})}),Object(N.jsx)("div",{className:"neweditorbutton",onClick:this.newEditor.bind(this),children:Object(N.jsx)("p",{className:"noselect",children:"+"})})]})}}]),n}(s.a.Component),J=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).IP=e.serverIP,r.username=e.username,r}return Object(u.a)(n,[{key:"render",value:function(){return Object(N.jsxs)("div",{children:[Object(N.jsx)(B,{IP:this.IP,username:this.username}),Object(N.jsx)("div",{className:"vr"}),Object(N.jsx)(L,{IP:this.IP,username:this.username})]})}}]),n}(s.a.Component);var F=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).IP=e.serverIP,r.username=e.username,r.drop=function(e){var t=e.dataTransfer.getData("application/json");t&&function(e,t){var n=JSON.parse(e);console.log("Slicing queue:",n);var r=[];for(var s in n.queueElements){var a=n.queueElements[s];console.log("Slicing item:",a),r.push(a)}!function(e,t){f.apply(this,arguments)}(JSON.stringify({queue:r}),t)}(t,r.IP)},r.dragOver=function(e){e.preventDefault()},r}return Object(u.a)(n,[{key:"render",value:function(){return Object(N.jsx)("div",{children:Object(N.jsxs)("div",{className:"sliceBox",children:[Object(N.jsx)("div",{className:"sliceText",children:Object(N.jsx)("p",{className:"noselect",children:"SLICE"})}),Object(N.jsx)("div",{id:"sliceBucket",className:"sliceBucket",onDragOver:this.dragOver,onDrop:this.drop})]})})}}]),n}(s.a.Component),G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),s(e),a(e),i(e)}))},H="testman";i.a.render(Object(N.jsxs)(s.a.StrictMode,{children:[Object(N.jsx)(F,{username:H,serverIP:"54.159.145.255"}),Object(N.jsx)(M,{username:H,serverIP:"54.159.145.255"}),Object(N.jsx)(J,{username:H,serverIP:"54.159.145.255"})]}),document.getElementById("root")),G()},9:function(e,t,n){}},[[19,1,2]]]);
//# sourceMappingURL=main.dbd7a1f1.chunk.js.map